<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <title>Getting Started - Unigornel</title>
    <meta name="generator" content="Hugo 0.17-DEV" />

    
    <meta name="description" content="A material design theme for documentations.">
    
    <link rel="canonical" href="../getting-started/">
    

    <meta property="og:url" content="/getting-started/">
    <meta property="og:title" content="Unigornel">
    <meta property="og:image" content="/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Unigornel">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('/fonts/icon.eot?52m981');
        src: url('/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('/fonts/icon.woff?52m981')
               format('woff'),
             url('/fonts/icon.ttf?52m981')
               format('truetype'),
             url('/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../stylesheets/application.css">
    <link rel="stylesheet" href="../stylesheets/palettes.css">
    <link rel="stylesheet" href="../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu%2bMono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-deep-purple palette-accent-light-green">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Getting Started
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/Unigornel" title="@Unigornel on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/unigornel/unigornel" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../images/logo.png">
        </div>
      
      <div class="name">
        <strong>Unigornel </strong>
        
          <br>
          unigornel/unigornel
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      <hr>
      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Home" href="../">
	
	Home
</a>


  
</li>



<li>
  
    



<a class="current" title="Getting started" href="../getting-started/">
	
	Getting started
</a>


<ul id="scrollspy">
</ul>

  
</li>



<li>
  
    



<a  title="Development" href="../development/">
	
	Development
</a>


    <ul>
      
        
        



<a  title="Debugging a Unikernel" href="../development/debugging/">
	
	Debugging a Unikernel
</a>


      
        
        



<a  title="Roadmap" href="../development/roadmap/">
	
	Roadmap
</a>


      
        
        



<a  title="System Calls" href="../development/systemcalls/">
	
	System Calls
</a>


      
    </ul>
  
</li>



<li>
  
    



<a  title="Presentations" href="../presentations/">
	
	Presentations
</a>


  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Getting Started </h1>

			

<p>This tutorial will guide you through the basic steps of creating a Go unikernel. We assume you have a working 64-bit Xen installation. At the end of this tutorial, you&rsquo;ll be able to print something to the Xen console.</p>

<hr />

<h2 id="installation">Installation</h2>

<p>The unigornel project can be downloaded using <code>go get</code>. Use this command to get the source of the <code>unigornel</code> command and its dependencies.</p>

<pre><code class="language-sh">go get -v github.com/unigornel/unigornel/unigornel
</code></pre>

<p>The <code>github.com/unigornel/unigornel</code> repository contains two submodules. These submodules reference to matching versions of the <code>go</code>-fork and the <code>mini-os</code> fork. Use <code>git</code> to update these submodules.</p>

<pre><code class="language-sh">cd $GOPATH/src/github.com/unigornel/unigornel
git submodule update --init --recursive
</code></pre>

<p>You are now ready to build the <code>unigornel</code> command line utility and the fork of the Go programming language. We assume you have a working Go installation in <code>/usr/local/go</code>.</p>

<pre><code class="language-sh">  cd $GOPATH/src/github.com/unigornel/unigornel
  GOROOT_BOOTSTRAP=/usr/local/go make
</code></pre>

<p>This command will build an edited version of Go and a command line utility called <code>unigornel</code> (in <code>$GOPATH/bin/unigornel'</code>. This command line utility is used to actually build unikernels. It relies on the correct values of the environment variables <code>GOROOT</code>, <code>UNIGORNEL_MINIOS</code> and <code>PATH</code> to build unikernels.</p>

<p>To automatically configure your environment you can use the <code>unigornel env</code>. This command reads out a configuration file in <code>$HOME/.unigornel.yaml</code> and spits out the correct environment variables. To generate &ldquo;.unigornel.yaml&rdquo; for your current environment, run</p>

<pre><code class="language-sh">cd $GOPATH/src/github.com/unigornel/unigornel
make install
</code></pre>

<h2 id="setup-your-environment">Setup your environment</h2>

<p>Make sure the <code>unigornel</code> command line utility is in your path.</p>

<pre><code class="language-sh">export PATH=&quot;$GOPATH/bin:$PATH&quot;
</code></pre>

<p>Now make sure all environment variables are set correctly.</p>

<pre><code class="language-sh">eval $(unigornel env)
</code></pre>

<p>You can now use <code>unigornel build</code> to build unikernels.</p>

<h2 id="building-a-unikernel">Building a unikernel</h2>

<p>Source code for unikernels should be placed in your GOPATH. We will be compiling a unikernel that prints out <code>Hello World!</code> to the console.</p>

<pre><code class="language-sh">mkdir $GOPATH/src/helloworld
</code></pre>

<p>Put the following code in <code>$GOPATH/src/helloworld/main.go</code></p>

<pre><code class="language-Go">package main

import &quot;C&quot;
import &quot;fmt&quot;

func main() {}

//export Main
func Main(unused int) {
	fmt.Printf(&quot;Hello World!\n&quot;)
}
</code></pre>

<p>Now build your unikernel</p>

<pre><code class="language-sh">cd $GOPATH/src/helloworld
unigornel build -o helloworld
</code></pre>

<h2 id="running-a-unikernel">Running a unikernel</h2>

<p>The resulting binary can be executed directly under Xen. The following configuration file can be used. Note that currently a lot of memory is needed, as the memory subsystem is not yet finished.</p>

<pre><code class="language-sh">cd $GOPATH/src/helloworld
cat helloworld.xen
kernel = &quot;helloworld&quot;
memory = 256
name = &quot;helloworld&quot;
on_crash = &quot;preserve&quot;
</code></pre>

<p>Run the unikernel using the <code>xl</code> command</p>

<pre><code class="language-sh">xl create -c helloworld.xen
</code></pre>

<p>It should generate the following console output</p>

<pre><code class="language-sh">Xen Minimal OS!
  start_info: 0000000000221000(VA)
    nr_pages: 0x10000
  shared_inf: 0xa8da5000(MA)
     pt_base: 0000000000224000(VA)
nr_pt_frames: 0x5
    mfn_list: 00000000001a1000(VA)
   mod_start: 0x0(VA)
     mod_len: 0
       flags: 0x0
    cmd_line: 
       stack: 000000000015b8c0-000000000017b8c0
MM: Init
      _text: 0000000000000000(VA)
     _etext: 000000000008f559(VA)
   _erodata: 000000000012e000(VA)
     _edata: 000000000012fee0(VA)
stack start: 000000000015b8c0(VA)
       _end: 000000000019bdf8(VA)
  start_pfn: 22c
    max_pfn: 10000
Mapping memory range 0x22c000 - 0x10000000
setting 0000000000000000-000000000012e000 readonly
skipped 1000
MM: Initialise page allocator for 2aa000(2aa000)-10000000(10000000)
MM: done
Demand map pfns at 10001000-0000002010001000.
Initialising timer interface
Initialising console ... done.
gnttab_table mapped at 0000000010001000.
Initialising scheduler
Thread &quot;Idle&quot;: pointer: 0x000000000032e070, stack: 0x0000000000330000
Thread &quot;xenstore&quot;: pointer: 0x000000000032e0d8, stack: 0x0000000000340000
xenbus initialised on irq 1 mfn 0x103e6b
Thread &quot;shutdown&quot;: pointer: 0x000000000032e140, stack: 0x0000000000350000
go_main.c: app_main(000000000017b8c0)
Thread &quot;main&quot;: pointer: 0x000000000032e220, stack: 0x0000000000370000
Thread &quot;initialize_go&quot;: pointer: 0x000000000032e300, stack: 0x0000000000380000
mmap(addr=000000c000000000,len=0x4412000,prot=0x0, flags=0x1002)
mmap(addr=0000000000000000,len=0x40000,prot=0x3, flags=0x1002)
mmap(addr=0000000004410000,len=0x100000,prot=0x3, flags=0x1002)
mmap(addr=0000000004408000,len=0x8000,prot=0x3, flags=0x1002)
mmap(addr=0000000004000000,len=0x1000,prot=0x3, flags=0x1002)
mmap(addr=0000000000000000,len=0x10000,prot=0x3, flags=0x1002)
Thread &quot;pthread-0&quot;: pointer: 0x000000000032e488, stack: 0x00000000003a0000
mmap(addr=0000000000000000,len=0x40000,prot=0x3, flags=0x1002)
Thread &quot;pthread-1&quot;: pointer: 0x000000000032e5a0, stack: 0x00000000003b0000
Hello World!
crash: go_main.c, line 20: main thread must not return
</code></pre>


            <aside class="copyright" role="note">
    <hr>
	
    Copyright &copy; 2016 Unigornel
    
    </aside>


			<footer class="footer">
				

			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '\/';
      var repo_id  = 'unigornel\/unigornel';
    
    </script>

    <script src="../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;
            
            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
        

        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
